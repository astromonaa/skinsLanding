(()=>{"use strict";class e{constructor(e,s,n){this.image=e,this.description=s,this.price=n}}class s{constructor(e,s,n){this.skins=e,this.totalPrice=s,this.avatar=n,this.messages=[]}addSkin(e){this.skins.push(e)}increasePrice(e){this.totalPrice+=e}calculateTotalPrice(){this.skins.forEach((e=>this.totalPrice+=e.price))}}class n{constructor(e){this.seller=e,this.open=!1,this.listen()}renderModalData(e){e.innerHTML="",this.seller.skins.forEach((s=>{const n=`\n        <div class="seller-skins__item">\n          <input type="checkbox" name="" id="" class="modal-skin-checkbox">\n          <img src=${s.image} alt="skin">\n          <div class="skin-desc">\n            <span>${s.description[0]}</span> /\n            <span>${s.description[1]}</span>\n            <span>${s.description[2]?`/ ${s.description[2]}`:""}</span>\n          </div>\n          <div class="skin-price">\n            <span> &#x24;</span>\n            <span>${s.price.toLocaleString("ru")}</span>\n          </div>\n        </div>\n      `;e.insertAdjacentHTML("beforeend",n)}))}listen(){document.querySelector(".trades__item__bottom").addEventListener("click",(e=>this.onModalOpen(e))),document.querySelector(".modal-close").addEventListener("click",(()=>this.onModalClose()))}onModalOpen(e){e.target.classList.contains("modal-open-icon")&&(this.open=!0,this.updateView())}onModalClose(){this.open=!1,this.updateView()}updateView(){const e=document.querySelector(".modal-wrapper"),s=e.querySelector(".modal-user-skins");this.open?(this.renderModalData(s),e?.classList.add("visible-modal-wrapper")):e?.classList.remove("visible-modal-wrapper")}}class t{constructor(e){this.user=e,this.userMessage="",this.listen()}listen(){const e=document.getElementById("message-input");e.addEventListener("input",(e=>this.onMessageInputChange(e))),e.addEventListener("keydown",(e=>this.onMessageSend(e)))}onMessageInputChange(e){this.userMessage=e.target.value}onMessageSend(e){if("Enter"===e.key&&this.userMessage.trim().length){const s=document.querySelector(".chat-messages"),n=this.getUserMessage();s.insertAdjacentHTML("beforeend",n);const t=document.querySelectorAll(".message-item");t[t.length-1].scrollIntoView({block:"center",behavior:"smooth"}),e.target.value=""}}getUserMessage(){return`\n      <div class="message-item">\n        <div class="message-item__top">\n          <img src="./assets/seller.png" alt="seller">\n          <span>Path</span>\n          <button class="my-button">Trade</button>\n        </div>\n        <div class="message-text">${this.userMessage} </div>\n        <div class="offer-skins">\n          ${this.getOfferSkins()}\n        </div>\n      </div>\n    `}getOfferSkins(){const e=[];for(let s=0;s<5;s++){const n=`\n        <div class="seller-skins__item">\n          <input type="checkbox" name="" id="" class="modal-skin-checkbox">\n          <img src=${this.user.skins[s].image} alt="skin">\n          <div class="skin-desc">\n            <span>${this.user.skins[s].description[0]}</span> /\n            <span>${this.user.skins[s].description[1]}</span>\n            <span>${this.user.skins[s].description[2]?`/ ${this.user.skins[s].description[2]}`:""}</span>\n          </div>\n          <div class="skin-price">\n            <span> &#x24;</span>\n            <span>${this.user.skins[s].price.toLocaleString("ru")}</span>\n          </div>\n        </div>\n      `;e.push(n)}return e.join("")}}window.app||(window.app=new class{constructor(e){this.initData=e,this.sellers=[],this.user=null,this.modal=null,this.chat=null,this.init()}init(){this.initData.forEach((n=>{const t=new s([],0,n.avatar);n.skins.forEach((s=>{const n=new e(s.image,s.description,s.price);t.addSkin(n),t.increasePrice(s.price)})),this.sellers.push(t)})),this.user=new s(this.sellers[0].skins,0,this.sellers[0].avatar),this.user.calculateTotalPrice(),this.modal=new n(this.user),this.chat=new t(this.user)}renderData(){this.sellers.forEach((e=>{const s=document.createElement("div"),n=document.createElement("div"),t=document.createElement("img"),i=document.createElement("span"),a=document.createElement("button"),r=document.createElement("div"),c=document.createElement("span"),o=document.createElement("span"),l=document.createElement("div");s.classList.add("seller-item"),n.classList.add("seller-item__top"),t.setAttribute("src",e.avatar),i.innerHTML="Path",a.classList.add("my-button"),a.innerHTML="Trade",r.classList.add("seller-item__top__price"),c.innerHTML="&#x24;",o.innerHTML=e.totalPrice.toLocaleString("ru"),l.classList.add("seller-skins"),r.insertAdjacentElement("beforeend",c),r.insertAdjacentElement("beforeend",o),n.insertAdjacentElement("beforeend",t),n.insertAdjacentElement("beforeend",i),n.insertAdjacentElement("beforeend",a),n.insertAdjacentElement("beforeend",r),s.insertAdjacentElement("beforeend",n),s.insertAdjacentElement("beforeend",l),e.skins.forEach((e=>{const n=`\n          <div class="seller-skins__item">\n            <img src=${e.image} alt="skin">\n            <div class="skin-desc">\n              <span>${e.description[0]}</span> /\n              <span>${e.description[1]}</span>\n              <span>${e.description[2]?`/ ${e.description[2]}`:""}</span>\n            </div>\n            <div class="skin-price">\n              <span> &#x24;</span>\n              <span>${e.price.toLocaleString("ru")}</span>\n            </div>\n          </div>\n        `;s.querySelector(".seller-skins").insertAdjacentHTML("beforeend",n)})),document.querySelector(".products-block").insertAdjacentElement("beforeend",s)}))}}([{avatar:"./assets/seller.png",skins:[{name:"AWP",image:"./assets/skin.png",description:["ST","FN",.0589],price:400},{name:"AK-47",image:"./assets/skin2.png",description:["ST","MW",.1389],price:3e4},{name:"USP-S",image:"./assets/skin3.png",description:["FN",.0389],price:1500},{name:"M4A4",image:"./assets/skin4.png",description:["FN",.0589],price:900},{name:"Neo-Noir",image:"./assets/skin5.png",description:["ST","FN",.0589],price:400},{name:"Butterfly knife",image:"./assets/skin6.png",description:["ST","MW",.1389],price:3e4},{name:"Howl",image:"./assets/skin7.png",description:["FN",.0389],price:1500},{name:"Lore",image:"./assets/skin8.png",description:["ST","FN",.0589],price:400}]}]),window.app.renderData())})();